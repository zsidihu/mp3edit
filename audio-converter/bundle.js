!function(e){!function require(t){var a={exports:{}};return e[t][0].call(a.exports,function(a){return require(e[t][1][a])},a,a.exports),a.exports}(2)}({1:[function(e,t,a){"use strict";const i=["rect","circle","ellipse","line","polyline","polygon","path","text","tspan","textPath","svg","g","defs","use","symbol","style","clipPath","mask","filter","pattern","linearGradient","radialGradient","title","desc","image"],n={$:document.querySelector.bind(document),$$:document.querySelectorAll.bind(document),cE(e,t={}){const a=i.includes(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);for(const[e,i]of Object.entries(t))null!=i&&a.setAttribute(e,i);return a},addClass(e,...t){const a=e instanceof Element?e:this.$(e);a?.classList.add(...t)},remClass(e,...t){const a=e instanceof Element?e:this.$(e);a?.classList.remove(...t)},addClassAll(e,...t){this.$$(e).forEach(e=>e.classList.add(...t))},remClassAll(e,...t){this.$$(e).forEach(e=>e.classList.remove(...t))},attr(e,t,a){const i=e instanceof Element?e:this.$(e);if(i)return void 0===a?i.getAttribute(t):void i.setAttribute(t,a)},css(e,t,a){const i=e instanceof Element?e:this.$(e);i&&("string"==typeof t&&void 0!==a?i.style[t]=a:"object"==typeof t&&Object.assign(i.style,t))},html(e,t){const a=e instanceof Element?e:this.$(e);if(a)return void 0===t?a.innerHTML:void(a.innerHTML=t)},text(e,t){const a=e instanceof Element?e:this.$(e);if(a)return void 0===t?a.textContent:void(a.textContent=t)},on(e,t,a,i){const n=e instanceof Element||e instanceof Document||e===window?e:this.$(e);n?.addEventListener(t,a,i)},off(e,t,a,i){const n=e instanceof Element||e instanceof Document||e===window?e:this.$(e);n?.removeEventListener(t,a,i)}};class FFmpegHelper{ffmpegCore=null;ffmpegRunning=!1;ffmpegCurrentDuration=null;ffmpegLogContent=null;ffmpegLogEmptyCount=0;ffmpegDurationHandler=null;ffmpegProgressHandler=null;ffmpegLogHandler=null;handleFFmpegOutput=(e,t)=>{null!=this.ffmpegLogHandler&&this.ffmpegLogHandler(e,t),this.detectDuration(t),this.detectProgress(t),this.detectCompletion(t)};initialzeFFmpeg=async()=>{await createFFmpegCore({print:e=>{this.handleFFmpegOutput("stdout",e)},printErr:e=>{this.handleFFmpegOutput("stdout",e)}}).then(async e=>{this.ffmpegCore=e})};inSeconds=e=>3600*parseFloat(e[1])+60*parseFloat(e[2])+parseFloat(e[3])+1e3*parseFloat("0."+e[4])/1e3;detectProgress=e=>{var t=e.match(/.*time.(\d\d).(\d\d).(\d\d).(\d+).*/m);if(null!=t){var a=this.inSeconds(t),i=a;return null!=this.ffmpegCurrentDuration&&(i=~~(a/this.ffmpegCurrentDuration*100)),null!=this.ffmpegProgressHandler&&this.ffmpegProgressHandler(i),a}};FS=()=>this.ffmpegCore.FS;detectDuration=e=>{var t=e.match(/.*Duration..(\d\d).(\d\d).(\d\d).(\d+).*/m);if(null!=t){var a=this.inSeconds(t);return null!=this.ffmpegDurationHandler&&this.ffmpegDurationHandler(a),this.ffmpegCurrentDuration=a,a}};detectCompletion=e=>{(e.includes("kB muxing overhead")||e.includes("Invalid argument")||e.includes("Invalid data found")||e.includes("At least one output file"))&&null!==this.runResolve&&(this.runResolve(),this.runResolve=null,this.ffmpegLogEmptyCount=0,this.ffmpegRunning=!1,this.ffmpegCurrentDuration=null,null!=this.ffmpegProgressHandler&&this.ffmpegProgressHandler(100))};run=e=>{if(e=["-y","-hide_banner","-stats_period","0.2","-loglevel","info","-nostdin",...e],this.ffmpegRunning)throw Error("ffmpeg.wasm can only run one command at a time");return this.ffmpegRunning=!0,new Promise(t=>{this.runResolve=t,this.ffmpegCore.callMain(e)})}}var o,s={getInstance:function(){return o||(o=function createInstance(){var e=new FFmpegHelper;return e.initialzeFFmpeg(),e}()),o}};t.exports={Attach:(e,t)=>{for(let a in t)e.appendChild(t[a])},Elem:n,FFmpegSingleton:s,TouchDevice:()=>{let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},UniqueID:(e=8)=>{const t=new Uint8Array(e);return crypto.getRandomValues(t),"id_"+Array.from(t).map(e=>e.toString(36).padStart(2,"0")).join("").substring(0,e)}}},{}],2:[function(e,t,a){"use strict";const{Attach:i,Elem:n,FFmpegSingleton:o,TouchDevice:s,UniqueID:c}=e("./a.js"),l={"-ae":null,"-ac":"2","-ar":"44100","-cl":"5","-c:a":null,"-b:a":"128k"},r={".aac":"audio/aac",".ac3":"audio/ac3",".m4a":"audio/mp4",".mp3":"audio/mpeg",".ogg":"audio/ogg",".wav":"audio/wav",".wma":"audio/x-ms-wma",".wv":"audio/x-wavpack",".alac":"audio/alac",".flac":"audio/flac",".opus":"audio/opus"},d=n.$(".progress-bar"),m=n.$(".progress-box"),p=d.firstElementChild,u=m.firstElementChild,setProgress=(e=0)=>{m.style.width=e+"%",p.textContent=e+"%",u.textContent=e+"%"};n.on(document,"click",async e=>{if(e.target.hasAttribute("data-button")){e.preventDefault();if("openFile"===e.target.dataset.button){const e=n.cE("input",{type:"file"});n.on(e,"input",async e=>{const t=e.target.files[0];if(t){const e=n.$(".editor"),a=n.$(".option"),i=n.cE("a",{class:"icon-media-button","data-icon":"convert",href:"#",title:"Convert file"}),s=e.children[0],c=e.children[1];n.text(s,t.name),n.remClass(e,"hide"),a.lastElementChild.replaceChildren(),a.lastElementChild.appendChild(i),setProgress(),((e=0)=>{d.style.width=e,p.style.width=e,u.style.width=e,d.style["max-width"]=e,p.style["max-width"]=e,u.style["max-width"]=e})(c.offsetWidth+"px"),n.on(i,"click",async e=>{e.preventDefault();let i=[];const fname=(e,t)=>{const a=e.lastIndexOf(".");return a<=0?e+t:e.slice(0,a)+t},s=t.name,c=fname(t.name,".alac"===l["-ae"]?".m4a":l["-ae"]),d=o.getInstance();if(s===c)return;switch(n.remClass(m,"reset"),n.addClass(a,"grayed"),n.addClass(a,"rotate"),await d.initialzeFFmpeg(),d.ffmpegProgressHandler=e=>setProgress(e.toFixed()),l["-ae"]){case".aac":case".m4a":i=["-i",s,"-vn","-c:a","aac","-b:a",l["-b:a"],c];break;case".ac3":i=["-i",s,"-vn","-c:a","ac3","-b:a",l["-b:a"],c];break;case".mp3":i=["-i",s,"-vn","-c:a","libmp3lame","-b:a",l["-b:a"],c];break;case".ogg":i=["-i",s,"-vn","-c:a","libopus","-b:a",l["-b:a"],"-vbr","on",c];break;case".opus":i=["-i",s,"-vn","-c:a","libopus","-b:a",l["-b:a"],c];break;case".wav":i=["-i",s,"-vn","-c:a","pcm_s16le","-ar",l["-ar"],"-ac",l["-ac"],c];break;case".wma":i=["-i",s,"-vn","-c:a","wmav2","-b:a",l["-b:a"],c];break;case".wv":i=["-i",s,"-vn","-c:a","wavpack",c];break;case".alac":i=["-i",s,"-vn","-c:a","alac",c];break;case".flac":i=["-i",s,"-vn","-c:a","flac","-compression_level",l["-cl"],c]}d.FS().writeFile(s,new Uint8Array(await t.arrayBuffer())),await d.run(i);if(void 0!==d.FS().readdir(".").find(e=>e===c)){const e=d.FS().readFile(c);((e,t)=>{const a=new FileReader;a.onloadend=()=>t(a.result),a.readAsDataURL(e)})(new Blob([e.buffer],{type:r[l["-ae"]]}),e=>{let a=c;".alac"===l["-ae"]&&(a=fname(t.name,".alac"));const i=n.cE("a",{download:a,href:e});document.body.appendChild(i),i.click(),document.body.removeChild(i)})}n.remClass(a,"grayed"),n.remClass(a,"rotate"),setTimeout(()=>{n.addClass(m,"reset"),setProgress()},1e3)})}}),e.click()}}}),n.on("select","input",e=>{const t=e.target;if("-ae"===t.id)switch(l["-ae"]=e.target.value,n.remClass(".option","grayed"),e.target.value){case".aac":case".ac3":case".m4a":case".mp3":case".ogg":case".wma":case".opus":n.addClass(".options > div:nth-child(1)","hide"),n.remClass(".options > div:nth-child(2)","hide"),n.addClass(".options > div:nth-child(3)","hide");break;case".wav":n.remClass(".options > div:nth-child(1)","hide"),n.addClass(".options > div:nth-child(2)","hide"),n.addClass(".options > div:nth-child(3)","hide");break;case".alac":case".wv":n.addClass(".options > div:nth-child(1)","hide"),n.addClass(".options > div:nth-child(2)","hide"),n.addClass(".options > div:nth-child(3)","hide");break;case".flac":n.addClass(".options > div:nth-child(1)","hide"),n.addClass(".options > div:nth-child(2)","hide"),n.remClass(".options > div:nth-child(3)","hide")}else"-ar"===t.id?l["-ar"]=e.target.value.toString():"-ac"===t.id?l["-ac"]=e.target.value.toString():"-b:a"===t.id?l["-b:a"]=e.target.value.toString():"-cl"===t.id&&(l["-cl"]=e.target.value.toString())})},{"./a.js":1,"./b.js":2}]});