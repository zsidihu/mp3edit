!function(e){!function require(t){var a={exports:{}};return e[t][0].call(a.exports,function(a){return require(e[t][1][a])},a,a.exports),a.exports}(2)}({1:[function(e,t,a){"use strict";const i=["rect","circle","ellipse","line","polyline","polygon","path","text","tspan","textPath","svg","g","defs","use","symbol","style","clipPath","mask","filter","pattern","linearGradient","radialGradient","title","desc","image"],n={$:document.querySelector.bind(document),$$:document.querySelectorAll.bind(document),cE(e,t={}){const a=i.includes(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);for(const[e,i]of Object.entries(t))null!=i&&a.setAttribute(e,i);return a},addClass(e,...t){const a=e instanceof Element?e:this.$(e);a?.classList.add(...t)},remClass(e,...t){const a=e instanceof Element?e:this.$(e);a?.classList.remove(...t)},addClassAll(e,...t){this.$$(e).forEach(e=>e.classList.add(...t))},remClassAll(e,...t){this.$$(e).forEach(e=>e.classList.remove(...t))},attr(e,t,a){const i=e instanceof Element?e:this.$(e);if(i)return void 0===a?i.getAttribute(t):void i.setAttribute(t,a)},css(e,t,a){const i=e instanceof Element?e:this.$(e);i&&("string"==typeof t&&void 0!==a?i.style[t]=a:"object"==typeof t&&Object.assign(i.style,t))},html(e,t){const a=e instanceof Element?e:this.$(e);if(a)return void 0===t?a.innerHTML:void(a.innerHTML=t)},text(e,t){const a=e instanceof Element?e:this.$(e);if(a)return void 0===t?a.textContent:void(a.textContent=t)},on(e,t,a,i){const n=e instanceof Element||e instanceof Document||e===window?e:this.$(e);n?.addEventListener(t,a,i)},off(e,t,a,i){const n=e instanceof Element||e instanceof Document||e===window?e:this.$(e);n?.removeEventListener(t,a,i)}};class FFmpegHelper{ffmpegCore=null;ffmpegRunning=!1;ffmpegCurrentDuration=null;ffmpegLogContent=null;ffmpegLogEmptyCount=0;ffmpegDurationHandler=null;ffmpegProgressHandler=null;ffmpegLogHandler=null;handleFFmpegOutput=(e,t)=>{null!=this.ffmpegLogHandler&&this.ffmpegLogHandler(e,t),this.detectDuration(t),this.detectProgress(t),this.detectCompletion(t)};initialzeFFmpeg=async()=>{await createFFmpegCore({print:e=>{this.handleFFmpegOutput("stdout",e)},printErr:e=>{this.handleFFmpegOutput("stdout",e)}}).then(async e=>{this.ffmpegCore=e})};inSeconds=e=>3600*parseFloat(e[1])+60*parseFloat(e[2])+parseFloat(e[3])+1e3*parseFloat("0."+e[4])/1e3;detectProgress=e=>{var t=e.match(/.*time.(\d\d).(\d\d).(\d\d).(\d+).*/m);if(null!=t){var a=this.inSeconds(t),i=a;return null!=this.ffmpegCurrentDuration&&(i=~~(a/this.ffmpegCurrentDuration*100)),null!=this.ffmpegProgressHandler&&this.ffmpegProgressHandler(i),a}};FS=()=>this.ffmpegCore.FS;detectDuration=e=>{var t=e.match(/.*Duration..(\d\d).(\d\d).(\d\d).(\d+).*/m);if(null!=t){var a=this.inSeconds(t);return null!=this.ffmpegDurationHandler&&this.ffmpegDurationHandler(a),this.ffmpegCurrentDuration=a,a}};detectCompletion=e=>{(e.includes("kB muxing overhead")||e.includes("Invalid argument")||e.includes("Invalid data found")||e.includes("At least one output file"))&&null!==this.runResolve&&(this.runResolve(),this.runResolve=null,this.ffmpegLogEmptyCount=0,this.ffmpegRunning=!1,this.ffmpegCurrentDuration=null,null!=this.ffmpegProgressHandler&&this.ffmpegProgressHandler(100))};run=e=>{if(e=["-y","-hide_banner","-stats_period","0.2","-loglevel","info","-nostdin",...e],this.ffmpegRunning)throw Error("ffmpeg.wasm can only run one command at a time");return this.ffmpegRunning=!0,new Promise(t=>{this.runResolve=t,this.ffmpegCore.callMain(e)})}}var o,s={getInstance:function(){return o||(o=function createInstance(){var e=new FFmpegHelper;return e.initialzeFFmpeg(),e}()),o}};t.exports={Attach:(e,t)=>{for(let a in t)e.appendChild(t[a])},Elem:n,FFmpegSingleton:s,ScrollController:class ScrollController{constructor(e,t={}){this.container=e,this.ease=t.ease||.1,this.targetScrollTop=this.container.scrollTop,this.currentScrollTop=this.container.scrollTop,this.scrolling=!1,this.onWheel=this.onWheel.bind(this),this.animate=this.animate.bind(this),this.container.addEventListener("wheel",this.onWheel,{passive:!1})}onWheel(e){if(this.isInsideAnotherScrollable(e.target))return;e.preventDefault(),this.targetScrollTop+=e.deltaY;const t=this.container.scrollHeight-this.container.clientHeight;this.targetScrollTop=Math.max(0,Math.min(t,this.targetScrollTop)),this.scrolling||(this.scrolling=!0,requestAnimationFrame(this.animate))}animate(){const e=this.targetScrollTop-this.currentScrollTop;Math.abs(e)>.5?(this.currentScrollTop+=e*this.ease,this.container.scrollTop=this.currentScrollTop,requestAnimationFrame(this.animate)):(this.container.scrollTop=this.targetScrollTop,this.currentScrollTop=this.targetScrollTop,this.scrolling=!1)}isInsideAnotherScrollable(e){let t=e;for(;t&&t!==this.container;){const e=getComputedStyle(t).overflowY;if(("auto"===e||"scroll"===e)&&t.scrollHeight>t.clientHeight)return!0;t=t.parentElement}return!1}},isSuppoted:e=>{if(!e)return!1;const t={mp3:"audio/mpeg",wav:"audio/wav",ogg:'audio/ogg; codecs="vorbis"',aac:'audio/mp4; codecs="mp4a.40.2"',m4a:'audio/mp4; codecs="mp4a.40.2"',flac:"audio/flac",opus:'audio/ogg; codecs="opus"'}[e.split(".").pop().toLowerCase()];if(!t)return!1;const a=document.createElement("audio").canPlayType(t);return"probably"===a||"maybe"===a},TouchDevice:()=>{let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}}},{}],2:[function(e,t,a){"use strict";const{Attach:i,Elem:n,FFmpegSingleton:o,ScrollController:s,isSuppoted:l,TouchDevice:r}=e("./a.js"),openDB=async()=>new Promise(e=>{const t=indexedDB.open("player-handles",1);t.onupgradeneeded=e=>e.target.result.createObjectStore("dirs"),t.onsuccess=()=>e(t.result)}),c=new(window.AudioContext||window.webkitAudioContext),u=n.$("#folder-tracks"),d=n.$("#album-artist"),m=n.$("#cover-image img"),p=n.$("#album-title"),h=n.$("#track-title"),f=n.$("canvas"),v=f.getContext("2d"),w={source:null,buffer:null,isplay:!1,onload:!1,volume:1,paused:0,elapsed:0,current:0,duration:0};let g=0,y=null,b=null,k=null,x=c.createAnalyser(),F=null;const q={repeat:!1,shuffle:!1},M={light:n.$("#theme-light"),dark:n.$("#theme-dark"),used:"theme-dark"},S=Array.from(n.$$(".eq")),z=[{node:null,value:0,freq:60},{node:null,value:0,freq:170},{node:null,value:0,freq:310},{node:null,value:0,freq:600},{node:null,value:0,freq:1e3},{node:null,value:0,freq:3e3}];S.forEach((e,t)=>{n.on(e,"input",e=>{z[t].value=parseFloat(e.target.value),z[t].node&&z[t].node.gain.setValueAtTime(z[t].value,c.currentTime),(()=>{const e=S.map(e=>parseFloat(e.value));localStorage.setItem("eqGains",JSON.stringify(e))})()})});const ClickHandler=(e,t,a,i=300)=>{let o=null;n.on(e,"click",()=>{null==o?o=setTimeout(()=>{t(),o=null},i):(clearTimeout(o),o=null,a())})},UpdateHeight=()=>{const e=window.innerHeight+"px";document.documentElement.style.height=e,document.body.style.height=e};let E=null,A=null,C=[];const drawBarLight=(e,t,a,i,n,o,s,l)=>{const r=(360*s/l+.002*performance.now())%360,c=v.createLinearGradient(e,t,a,i);c.addColorStop(0,`hsl(${r}, 80%, 45%)`),c.addColorStop(.5,`hsl(${(r+40)%360}, 80%, 50%)`),c.addColorStop(1,`hsl(${(r+80)%360}, 80%, 55%)`),v.strokeStyle=c,v.lineWidth=n,v.beginPath(),v.moveTo(e,t),v.lineTo(a,i),v.stroke()},drawBarDark=(e,t,a,i,n,o,s,l)=>{let r=v.createLinearGradient(0,0,0,f.height);r.addColorStop(0,"#37FF8B"),r.addColorStop(1,"#51D6FF"),v.strokeStyle=r,v.lineWidth=n,v.beginPath(),v.moveTo(e,t),v.lineTo(a,i),v.stroke()},visualizer=()=>{const e=f.width/2,t=f.height/2;v.clearRect(0,0,f.width,f.height),x.getByteFrequencyData(A);const a=120;for(let i=0;i<a;i++){const n=2*Math.PI/a,o=.15*A[i],s=e+60*Math.cos(n*i),l=t+60*Math.sin(n*i),r=e+Math.cos(n*i)*(60+o),c=t+Math.sin(n*i)*(60+o);"theme-light"==M.used?drawBarLight(s,l,r,c,3,A[i],i,a):drawBarDark(s,l,r,c,3,A[i])}w.isplay&&requestAnimationFrame(visualizer)},toggleMenu=e=>{const t=n.$("#open-menu");"auto"===e&&(t.classList.toggle("opened"),t.setAttribute("aria-expanded",t.classList.contains("opened"))),"close"===e&&(n.remClass(t,"opened"),t.setAttribute("aria-expanded",!1)),t.classList.contains("opened")?n.addClass("section","visible"):n.remClass("section","visible")},stopAudio=(e=!1)=>new Promise((t,a)=>{try{if(w.isplay=!1,w.source){try{w.source.onended=null}catch(e){}try{w.source.stop(0)}catch(e){}try{w.source.disconnect()}catch(e){}try{F.disconnect(),F=null}catch(e){}z.forEach(e=>{try{e.node.disconnect(),e.node=null}catch(e){}}),w.source=null}e&&(w.paused=0,w.buffer=null),t()}catch(e){a(e)}}),scanAndShow=async(e,t="name")=>{const a=n.$("#stop-track"),i=o.getInstance();await i.initialzeFFmpeg(),u.replaceChildren(),C=[];for await(const t of e.values())if("file"===t.kind&&/\.(mp3|m4a|flac|alac|ogg|opus|wav|wma|wv)$/i.test(t.name)){const e=await t.getFile();C.push({entry:t,file:e})}switch(t){case"name":C.sort((e,t)=>e.file.name.localeCompare(t.file.name));break;case"date":C.sort((e,t)=>t.file.lastModified-e.file.lastModified);break;case"size":C.sort((e,t)=>e.file.size-t.file.size)}for(let[e,{entry:t,file:i,preview:o}]of C.entries()){const o=i.name.replace(/\.[^.]+$/,""),s=n.cE("div",{class:"track","data-index":e,"data-text":o});ClickHandler(s,async()=>{b&&n.remClass(b,"active"),n.addClass(s,"active"),b=s,g=e},async()=>{b&&n.remClass(b,"active"),n.addClass(s,"active"),n.addClass(s,"loader"),b=s,g=e,a.click(),await playFile(i,t.name)}),u.appendChild(s)}b&&n.remClass(b,"active"),b=null,g=0,a.click()},FormatTime=e=>{const t=Math.floor(e),a=Math.floor(t/3600),i=Math.floor(t%3600/60),n=t%60;return a.toString().padStart(2,"0")+"."+i.toString().padStart(2,"0")+"."+n.toString().padStart(2,"0")},UpdateTime=()=>{if(w.source&&w.isplay){if(!w.isplay)return;const e=(e=>{if(!e.source)return 0;const t=c.currentTime,a=t-e.current;return e.current=t,e.elapsed+=a*e.source.playbackRate.value,e.elapsed})(w),t=FormatTime(e),a=FormatTime(w.duration);e>=w.buffer.duration&&w.source.stop(),n.$("#position").value=e,n.text("#elapsed",t+" / "+a),requestAnimationFrame(UpdateTime)}},playNext=async()=>{if(g<C.length-1||q.shuffle){q.repeat||(q.shuffle?g=Math.floor(Math.random()*C.length):++g);const{entry:e,file:t}=C[g],a=n.$('[data-index="'+g+'"]');b&&n.remClass(b,"active"),n.addClass(a,"active"),n.addClass(a,"loader"),b=a,await playFile(t,e.name)}else w.source&&await stopAudio(!0),b&&n.remClass(b,"active"),b=null,g=0,setTimeout(()=>v.clearRect(0,0,f.width,f.height),100),n.text("#elapsed","00.00.00 / 00.00.00"),n.attr("#position","max",0),n.attr("#position","value",0),n.$("#play-pause").firstElementChild.dataset.button="play"},playBuffer=async(e=!1)=>{if(w.buffer){w.source&&await stopAudio();const t=n.$("#position"),a=c.createDynamicsCompressor();F=c.createGain(),F.gain.value=w.volume,w.current=c.currentTime,w.elapsed=e?w.paused:0,w.source=c.createBufferSource(),w.source.buffer=w.buffer,w.source.onended=async()=>w.isplay&&await playNext(),z.forEach(e=>{e.node=c.createBiquadFilter(),e.node.type="peaking",e.node.Q.value=1.2,e.node.gain.value=e.value,e.node.frequency.value=e.freq}),w.source.connect(z[0].node);for(let e=0;e<z.length-1;e++)z[e].node.connect(z[e+1].node);z[z.length-1].node.connect(a),a.connect(F),F.connect(c.destination),F.connect(x),E=x.frequencyBinCount,A=new Uint8Array(E),"suspended"===c.state&&await c.resume(),w.isplay=!0,w.onload=!1,w.duration=w.buffer.duration,f.width=240,f.height=240,n.attr(t,"max",w.duration),n.attr(t,"value",w.elapsed),w.source.start(0,w.elapsed,w.duration),visualizer(),UpdateTime()}},playFile=async(e,t)=>{if(w.onload)return;w.onload=!0;const a=e.urn||e.name,i=n.$('[data-index="'+g+'"]'),s=n.$("#play-pause").firstElementChild;if(ID3.loadTags(a,function(){const e=ID3.getAllTags(a);if(d.innerHTML=e.artist?e.artist:"&nbsp;",p.innerHTML=e.album?e.album:"&nbsp;",h.innerHTML=e.title?e.title:t.replace(/\.[^.]+$/,""),e.picture){let t="";for(var i=0;i<e.picture.data.length;i++)t+=String.fromCharCode(e.picture.data[i]);m.src="data:"+e.picture.format+";base64,"+window.btoa(t)}else m.src="../assets/images/cover.png"},{tags:["title","artist","album","picture"],dataReader:ID3.FileAPIReader(e)}),l(t)){const t=await e.arrayBuffer();w.buffer=await c.decodeAudioData(t),await playBuffer(),s.dataset.button="pause",n.remClass(i,"loader")}else try{const t=await e.arrayBuffer(),a=o.getInstance();await a.initialzeFFmpeg();const l=["-i",e.name,"-vn","-codec:a","pcm_s16le","-f","wav","output.wav"];a.FS().writeFile(e.name,new Uint8Array(t)),await a.run(l);const r=a.FS().readFile("output.wav"),u=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);w.buffer=await c.decodeAudioData(u),await playBuffer(),s.dataset.button="pause",n.remClass(i,"loader")}catch(e){}};document.querySelectorAll("a").forEach(async e=>{n.on(e,"click",async e=>{switch(e.target.id&&e.preventDefault(),e.target.id){case"open-menu":toggleMenu("auto");break;case"clear-playlist":try{const e=(await openDB()).transaction("dirs","readwrite");e.objectStore("dirs").delete("playlist"),await new Promise(t=>e.oncomplete=t),b&&n.remClass(b,"active"),b=null,g=0,n.$("#stop-track").click(),u.replaceChildren(),C=null}catch(e){}break;case"theme-light":case"theme-dark":Object.values(M).forEach(t=>{t===e.target?n.addClass(t,"active"):n.remClass(t,"active")}),document.documentElement.setAttribute("data-theme",e.target.id),M.used=e.target.id,localStorage.setItem("theme",e.target.id);break;case"about-player":toggleMenu("close"),n.addClass(".version","visible");break;case"open-equalizer":toggleMenu("close"),n.addClass(".equalizer","visible");break;case"reset-equalizer":z.forEach((e,t)=>{e.value=0,e.node&&e.node.gain.setValueAtTime(0,c.currentTime),S[t]&&(S[t].value=0)}),localStorage.removeItem("eqGains");break;case"pick-folder":try{const e=await window.showDirectoryPicker(),t=(await openDB()).transaction("dirs","readwrite");t.objectStore("dirs").put(e,"playlist"),await new Promise(e=>t.oncomplete=e),await scanAndShow(e)}catch(e){}break;case"play-pause":if(w.isplay)stopAudio(),w.paused=w.elapsed,e.target.firstElementChild.dataset.button="play";else{if(w.buffer)await playBuffer(!0);else{const{entry:e,file:t}=C[g],a=n.$('[data-index="'+g+'"]');b||(b=a),n.addClass(a,"active"),n.addClass(a,"loader"),await playFile(t,e.name)}e.target.firstElementChild.dataset.button="pause"}break;case"stop-track":stopAudio(!0),setTimeout(()=>v.clearRect(0,0,f.width,f.height),100),n.attr("#position","max",0),n.attr("#position","value",0),n.text("#elapsed","00.00.00 / "+FormatTime(w.duration)),n.$("#play-pause").firstElementChild.dataset.button="play";break;case"play-prev":w.isplay&&(stopAudio(),await(async()=>{if(!q.repeat)if(g>0){const{entry:e,file:t}=C[--g],a=n.$('[data-index="'+g+'"]');b&&n.remClass(b,"active"),n.addClass(a,"active"),n.addClass(a,"loader"),b=a,await playFile(t,e.name)}else b&&n.remClass(b,"active"),b=null,g=0,setTimeout(()=>v.clearRect(0,0,f.width,f.height),100)})());break;case"play-next":w.isplay&&(stopAudio(),await playNext());break;case"play-repeat":e.target.classList.toggle("active"),q.repeat=!!e.target.classList.contains("active");break;case"play-shuffle":e.target.classList.toggle("active"),q.shuffle=!!e.target.classList.contains("active");break;case"set-volume":n.addClass(".volume","visible")}})}),n.on(document,"click",e=>{const t=e.target.getAttribute("aria-label")??null;"Main Menu"!==t&&"Menu Item"!==t&&toggleMenu("close"),"About Box"!==t&&"Main Menu"!==t&&"Menu Item"!==t&&n.remClass(".version","visible"),"Set Volume"!==t&&"Volume Box"!==t&&"Volume Range"!==t&&n.remClass(".volume","visible"),"Equalizer Box"!==t&&"Equalizer Range"!==t&&"Main Menu"!==t&&"Menu Item"!==t&&n.remClass(".equalizer","visible")}),n.on("#volume","input",e=>{w.volume=parseFloat(e.target.value),localStorage.setItem("volGain",w.volume),F&&F.gain.setValueAtTime(w.volume,c.currentTime)}),n.on("#position","input",async e=>{const t=parseFloat(e.target.value);w.isplay?(await stopAudio(),w.buffer&&(w.paused=t,await playBuffer(!0))):(w.paused=t,n.text("#elapsed",FormatTime(t)+" / "+FormatTime(w.duration)))}),n.on(window,"resize",UpdateHeight),async function(){if((()=>{const e=localStorage.getItem("eqGains");if(!e)return;JSON.parse(e).forEach((e,t)=>{S[t].value=e,z[t].value=e})})(),(()=>{const e=n.$("#volume"),t=localStorage.getItem("volGain");t&&(w.volume=t,e.value=t)})(),UpdateHeight(),y=new s(u,{ease:.05}),!("showDirectoryPicker"in window)){const e=n.$(".confirm"),t=n.cE("p",{"data-text":"Not support directory access."}),a=n.cE("a",{href:"#","data-text":"Ok"}),i=n.cE("div");return e.replaceChildren(),n.on(a,"click",e=>{e.preventDefault(),n.remClass(".confirm","visible")}),i.appendChild(a),e.appendChild(t),e.appendChild(i),void n.addClass(".confirm","visible")}"theme-light"===(localStorage.getItem("theme")??null)&&(n.addClass(M.light,"active"),n.remClass(M.dark,"active"),M.used="theme-light",document.documentElement.setAttribute("data-theme","theme-light"));const e=(await openDB()).transaction("dirs","readonly").objectStore("dirs").get("playlist");if(k=await new Promise(t=>{e.onsuccess=()=>t(e.result)}),k)try{if("granted"===await k.queryPermission({mode:"read"}))await scanAndShow(k);else{const e=n.$(".confirm"),t=n.cE("p",{"data-text":"Allow access to your files?"}),a=n.cE("a",{href:"#","data-text":"Allow"}),i=n.cE("a",{href:"#","data-text":"Cancel"}),o=n.cE("div");e.replaceChildren(),n.on(a,"click",async e=>{e.preventDefault();try{"granted"===await k.requestPermission({mode:"read"})?await scanAndShow(k):alert("EngedÃ©ly megtagadva"),n.remClass(".confirm","visible")}catch(e){console.error(e)}}),n.on(i,"click",e=>{e.preventDefault(),n.remClass(".confirm","visible")}),o.appendChild(a),o.appendChild(i),e.appendChild(t),e.appendChild(o),n.addClass(".confirm","visible")}}catch(e){console.error(e)}}()},{"./a.js":1,"./b.js":2}]});